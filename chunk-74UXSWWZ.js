import{a as K,c as U,d as j,e as z,f as H,g as V,h as $,i as q,j as J}from"./chunk-Q2IM2WI3.js";import{h as O,i as R,j as A,n as B,o as G}from"./chunk-AIF2N26Q.js";import{$a as v,Fa as g,Ha as s,Ja as y,Ka as F,La as P,Ma as D,Na as t,Oa as i,P as I,Pa as p,Sa as M,Ta as w,U as _,X as f,Xa as a,Ya as m,Za as k,_ as E,ab as C,bb as S,ra as u,ua as o,va as T}from"./chunk-PTW656XI.js";var h=class n{transform(r,e=250){if(!r)return"";let l=r.indexOf("[+"),c=l!==-1?r.slice(0,l).trim():r;if(c.length<=e)return c;let d=c.slice(0,e),Q=d.lastIndexOf(" ");return d=d.slice(0,Q),d+"..."}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=E({name:"cleanContent",type:n,pure:!0,standalone:!0})};function X(n,r){if(n&1&&(t(0,"a",10),a(1," continua a leggere "),i()),n&2){let e=w().$implicit;s("href",e.url,u)}}function Y(n,r){if(n&1&&(t(0,"tr")(1,"td"),p(2,"img",5),i(),t(3,"td",6),a(4),i(),t(5,"td",6),a(6),i(),t(7,"td",6),a(8),i(),t(9,"td",6),a(10),i(),t(11,"td",7)(12,"a",8),a(13),i()(),t(14,"td"),a(15),C(16,"date"),i(),t(17,"td"),a(18),C(19,"cleanContent"),g(20,X,2,1,"a",9),i()()),n&2){let e=r.$implicit;o(2),s("src",e.urlToImage,u)("alt",e.source.name),o(2),m(e.source.name),o(2),m(e.author),o(2),m(e.title),o(2),m(e.description),o(2),s("href",e.url,u),o(),m(e.url),o(2),m(S(16,11,e.publishedAt,"dd/MM/yyyy")),o(3),k(" ",S(19,14,e.content,500)," "),o(2),s("ngIf",e.url)}}var x=class n{articles=[];get sortedArticles(){return this.articles.slice().sort((r,e)=>new Date(e.publishedAt).getTime()-new Date(r.publishedAt).getTime())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-news-table"]],inputs:{articles:"articles"},standalone:!0,features:[v],decls:25,vars:0,consts:[[1,"card"],[1,"card-body","p-0"],[1,"table-responsive",2,"max-height","600px","overflow-y","auto"],[1,"table","table-striped","table-bordered"],[1,"sticky-thead","bg-light"],[1,"article-image",3,"src","alt"],[1,"small-cell"],[1,"url-cell"],["target","_blank",3,"href"],["target","_blank","rel","noopener noreferrer","class","text-primary",3,"href",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"text-primary",3,"href"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"thead",4)(5,"tr")(6,"th"),a(7,"Image"),i(),t(8,"th"),a(9,"Name"),i(),t(10,"th"),a(11,"Author"),i(),t(12,"th"),a(13,"Title"),i(),t(14,"th"),a(15,"Description"),i(),t(16,"th"),a(17,"Url"),i(),t(18,"th"),a(19,"Data di pubblicazione"),i(),t(20,"th"),a(21,"Contenuto"),i()()(),t(22,"tbody"),P(23,Y,21,17,"tr",null,F),i()()()()()),e&2&&(o(23),D(l.sortedArticles))},dependencies:[A,O,R,h],styles:[".article-image[_ngcontent-%COMP%]{max-width:100px;max-height:80px;object-fit:cover;border-radius:4px}.url-cell[_ngcontent-%COMP%]{max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.small-cell[_ngcontent-%COMP%]{max-width:150px}.sticky-thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}"]})};var b=class n{constructor(r){this.http=r}apiUrl="https://newsapi.org/v2/everything";apiKey="d837f48ed2fe4fe094706057da58575c";getNewsByKeyword(r){let e=new Date().toISOString().split("T")[0],l=new B().set("q",r).set("sortBy","popularity").set("apiKey",this.apiKey);return this.http.get(this.apiUrl,{params:l})}static \u0275fac=function(e){return new(e||n)(_(G))};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};function ee(n,r){n&1&&(t(0,"div",8),a(1," Nessun articolo trovato per la parola chiave inserita. "),i())}function te(n,r){if(n&1&&(t(0,"div",0)(1,"div",9),p(2,"app-news-table",10),i()()),n&2){let e=w();o(2),s("articles",e.articles)}}var L=class n{constructor(r){this.newsService=r}searchForm=new z({keyword:new H("",{nonNullable:!0})});articles=[];noResults=!1;onSearch(){let{keyword:r}=this.searchForm.getRawValue(),e=r.trim();if(!e){console.warn("Inserisci una parola chiave valida.");return}this.newsService.getNewsByKeyword(e).subscribe(l=>{this.articles=l.articles,l.totalResults===0?(console.warn("Nessun articolo trovato"),this.noResults=!0):this.noResults=!1})}static \u0275fac=function(e){return new(e||n)(T(b))};static \u0275cmp=f({type:n,selectors:[["app-news-page"]],standalone:!0,features:[v],decls:12,vars:3,consts:[[1,"row","mt-3"],[1,"offset-3","col-6"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],["for","title",1,"form-label"],["type","text","id","title","formControlName","keyword",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-3"],[1,"alert","alert-warning","text-center","mt-3"],[1,"col-12"],[3,"articles"]],template:function(e,l){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),M("ngSubmit",function(){return l.onSearch()}),t(5,"label",5),a(6,"Inserisci il termine di ricerca"),i(),p(7,"input",6),t(8,"button",7),a(9," Cerca "),i()()()()()(),g(10,ee,2,0,"div",8)(11,te,3,1,"div",0)),e&2&&(o(4),s("formGroup",l.searchForm),o(6),y(l.noResults?10:-1),o(),y(l.articles.length>0?11:-1))},dependencies:[J,V,K,U,j,$,q,x]})};export{L as NewsPageComponent};
