import{c as C,g as S}from"./chunk-UJGMWTZB.js";import{a as I,b as d,c as w,d as N,e as y,f as u,g as E,h as P,i as _,j as G}from"./chunk-WFXLXMIN.js";import{i as F}from"./chunk-BTZGSW2D.js";import{$a as L,Fa as v,Ha as s,Na as n,Oa as i,Pa as l,Sa as b,X as f,Xa as m,Za as h,m as g,ua as t,va as p,y as c}from"./chunk-WTOSWDOI.js";function D(a,e){a&1&&l(0,"span",12)}var A=class a{constructor(e,r){this.authService=e;this.router=r}loginForm=new y({email:new u("",{nonNullable:!0,validators:[d.required]}),password:new u("",{nonNullable:!0,validators:[d.required]})});isLoading=!1;onLogin(){this.loginForm.invalid||(this.isLoading=!0,console.log(this.loginForm.value),this.authService.login(this.loginForm.value).pipe(c(e=>(console.error("Login Error:",e),alert("Credenziali non valide o errore di rete. Riprova."),this.isLoading=!1,g(null)))).subscribe(e=>{e&&(this.authService.setToken(e.accessToken),this.router.navigate(["news"])),this.isLoading=!1}))}static \u0275fac=function(r){return new(r||a)(p(S),p(C))};static \u0275cmp=f({type:a,selectors:[["app-login-page"]],standalone:!0,features:[L],decls:16,vars:4,consts:[[1,"row","mt-3"],[1,"offset-3","col-6"],[1,"card"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","placeholder","test@test.it","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","placeholder","adminadmin","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),b("ngSubmit",function(){return o.onLogin()}),n(5,"div",5)(6,"label",6),m(7,"Email"),i(),l(8,"input",7),i(),n(9,"div",5)(10,"label",8),m(11,"Password"),i(),l(12,"input",9),i(),n(13,"button",10),v(14,D,1,0,"span",11),m(15),i()()()()()()),r&2&&(t(4),s("formGroup",o.loginForm),t(9),s("disabled",o.loginForm.invalid||o.isLoading),t(),s("ngIf",o.isLoading),t(),h(" ",o.isLoading?"Accesso in corso...":"Login"," "))},dependencies:[G,E,I,w,N,P,_,F]})};export{A as LoginPageComponent};
